{
  "index_patterns": ["eprints-v*"],
  "priority": 500,
  "template": {
    "settings": {
      "number_of_shards": 5,
      "number_of_replicas": 1,
      "index.lifecycle.name": "eprints_ilm_policy",
      "refresh_interval": "5s",
      "max_result_window": 10000,
      "analysis": {
        "analyzer": {
          "eprint_analyzer": {
            "type": "custom",
            "tokenizer": "standard",
            "char_filter": ["html_strip"],
            "filter": [
              "lowercase",
              "asciifolding",
              "porter_stem",
              "academic_stopwords",
              "academic_synonym"
            ]
          },
          "keyword_analyzer": {
            "type": "keyword",
            "filter": ["lowercase"]
          },
          "name_analyzer": {
            "type": "custom",
            "tokenizer": "keyword",
            "filter": ["lowercase", "asciifolding"]
          },
          "ngram_analyzer": {
            "type": "custom",
            "tokenizer": "standard",
            "filter": ["lowercase", "asciifolding", "ngram_filter"]
          }
        },
        "filter": {
          "academic_stopwords": {
            "type": "stop",
            "stopwords": "_english_"
          },
          "academic_synonym": {
            "type": "synonym",
            "synonyms": [
              "ml, machine learning",
              "ai, artificial intelligence",
              "nlp, natural language processing",
              "dl, deep learning",
              "nn, neural network, neural networks",
              "cnn, convolutional neural network",
              "rnn, recurrent neural network",
              "lstm, long short-term memory",
              "bert, bidirectional encoder representations",
              "gpt, generative pre-trained transformer",
              "llm, large language model, large language models",
              "rl, reinforcement learning",
              "cv, computer vision",
              "gan, generative adversarial network, generative adversarial networks",
              "vae, variational autoencoder, variational autoencoders",
              "transformer, attention mechanism",
              "diffusion, diffusion model, diffusion models",
              "rag, retrieval augmented generation",
              "covid-19, coronavirus, sars-cov-2",
              "dna, deoxyribonucleic acid",
              "rna, ribonucleic acid"
            ]
          },
          "ngram_filter": {
            "type": "edge_ngram",
            "min_gram": 3,
            "max_gram": 20
          }
        }
      }
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date",
          "format": "strict_date_optional_time||epoch_millis"
        },
        "uri": {
          "type": "keyword"
        },
        "cid": {
          "type": "keyword"
        },
        "rkey": {
          "type": "keyword"
        },
        "title": {
          "type": "text",
          "analyzer": "eprint_analyzer",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            },
            "suggest": {
              "type": "completion"
            },
            "ngram": {
              "type": "text",
              "analyzer": "ngram_analyzer"
            }
          }
        },
        "abstract": {
          "type": "text",
          "analyzer": "eprint_analyzer"
        },
        "full_text": {
          "type": "text",
          "analyzer": "eprint_analyzer",
          "index": true,
          "store": false,
          "norms": false
        },
        "authors": {
          "type": "nested",
          "properties": {
            "did": {
              "type": "keyword"
            },
            "name": {
              "type": "text",
              "analyzer": "name_analyzer",
              "fields": {
                "keyword": {
                  "type": "keyword"
                }
              }
            },
            "orcid": {
              "type": "keyword"
            },
            "affiliation": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword"
                }
              }
            },
            "order": {
              "type": "integer"
            }
          }
        },
        "field_nodes": {
          "type": "nested",
          "properties": {
            "id": {
              "type": "keyword"
            },
            "label": {
              "type": "text",
              "analyzer": "eprint_analyzer",
              "fields": {
                "keyword": {
                  "type": "keyword"
                }
              }
            }
          }
        },
        "primary_field": {
          "type": "keyword"
        },
        "keywords": {
          "type": "keyword"
        },
        "facets": {
          "properties": {
            "matter": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "energy": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "space": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "time": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "personality": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "person": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "organization": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "event": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "work": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            },
            "form_genre": {
              "type": "keyword",
              "fields": {
                "text": {
                  "type": "text",
                  "analyzer": "eprint_analyzer"
                }
              }
            }
          }
        },
        "authorities": {
          "type": "keyword",
          "fields": {
            "text": {
              "type": "text",
              "analyzer": "eprint_analyzer"
            }
          }
        },
        "authority_uris": {
          "type": "keyword"
        },
        "tags": {
          "type": "keyword",
          "fields": {
            "text": {
              "type": "text",
              "analyzer": "eprint_analyzer"
            }
          }
        },
        "tag_count": {
          "type": "integer"
        },
        "doi": {
          "type": "keyword"
        },
        "version": {
          "type": "integer"
        },
        "previous_version": {
          "type": "keyword"
        },
        "license": {
          "type": "keyword"
        },
        "citation_count": {
          "type": "integer"
        },
        "endorsement_count": {
          "type": "integer"
        },
        "view_count": {
          "type": "integer"
        },
        "download_count": {
          "type": "integer"
        },
        "created_at": {
          "type": "date"
        },
        "updated_at": {
          "type": "date"
        },
        "indexed_at": {
          "type": "date"
        },
        "language": {
          "type": "keyword"
        },
        "document_metadata": {
          "properties": {
            "page_count": {
              "type": "integer"
            },
            "file_size": {
              "type": "long"
            },
            "content_type": {
              "type": "keyword"
            },
            "word_count": {
              "type": "integer"
            },
            "character_count": {
              "type": "integer"
            },
            "language": {
              "type": "keyword"
            }
          }
        },
        "document_blob_ref": {
          "properties": {
            "cid": {
              "type": "keyword"
            },
            "mime_type": {
              "type": "keyword"
            },
            "size": {
              "type": "long"
            }
          }
        },
        "document_format": {
          "type": "keyword"
        },
        "publication_status": {
          "type": "keyword"
        },
        "published_version": {
          "properties": {
            "doi": {
              "type": "keyword"
            },
            "url": {
              "type": "keyword"
            },
            "published_at": {
              "type": "date"
            },
            "journal": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword"
                }
              }
            },
            "publisher": {
              "type": "keyword"
            },
            "access_type": {
              "type": "keyword"
            }
          }
        },
        "external_ids": {
          "properties": {
            "arxiv_id": {
              "type": "keyword"
            },
            "pmid": {
              "type": "keyword"
            },
            "pmcid": {
              "type": "keyword"
            },
            "ssrn_id": {
              "type": "keyword"
            },
            "open_alex_id": {
              "type": "keyword"
            }
          }
        },
        "supplementary_count": {
          "type": "integer"
        },
        "has_code_repository": {
          "type": "boolean"
        },
        "has_data_repository": {
          "type": "boolean"
        },
        "funder_names": {
          "type": "keyword"
        },
        "author_count": {
          "type": "integer"
        },
        "keyword_count": {
          "type": "integer"
        },
        "year_published": {
          "type": "integer"
        },
        "rank_score": {
          "type": "float"
        },
        "freshness": {
          "type": "float"
        },
        "pds_url": {
          "type": "keyword"
        },
        "pds_endpoint": {
          "type": "keyword"
        }
      }
    }
  }
}
