{
  "lexicon": 1,
  "id": "pub.chive.contribution.typeProposal",
  "defs": {
    "externalMapping": {
      "type": "object",
      "description": "Proposed mapping to external ontology",
      "required": ["system", "identifier"],
      "properties": {
        "system": {
          "type": "string",
          "description": "External system identifier",
          "knownValues": ["credit", "cro", "scoro", "pro"],
          "maxLength": 50
        },
        "identifier": {
          "type": "string",
          "description": "Identifier in the external system",
          "maxLength": 100
        },
        "uri": {
          "type": "string",
          "format": "uri",
          "description": "Full URI in the external system"
        }
      }
    },
    "main": {
      "type": "record",
      "description": "Community proposal for new contribution type (stored in user's PDS)",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["proposalType", "proposedId", "proposedLabel", "rationale", "createdAt"],
        "properties": {
          "typeId": {
            "type": "string",
            "description": "Existing type ID (for updates/deprecations)",
            "maxLength": 50
          },
          "proposalType": {
            "type": "string",
            "knownValues": ["create", "update", "deprecate"],
            "description": "Type of proposal"
          },
          "proposedId": {
            "type": "string",
            "description": "Proposed type identifier (e.g., 'clinical-trials')",
            "maxLength": 50
          },
          "proposedLabel": {
            "type": "string",
            "description": "Human-readable label",
            "maxLength": 100
          },
          "proposedDescription": {
            "type": "string",
            "description": "Detailed description of contribution type",
            "maxLength": 1000
          },
          "externalMappings": {
            "type": "array",
            "description": "Links to external ontologies (CRO, SCoRO, etc.)",
            "items": {
              "type": "ref",
              "ref": "#externalMapping"
            },
            "maxLength": 10
          },
          "rationale": {
            "type": "string",
            "description": "Justification for proposal",
            "maxLength": 2000
          },
          "supersedes": {
            "type": "string",
            "format": "at-uri",
            "description": "AT-URI of type to be deprecated (for deprecate proposals)"
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "Proposal creation timestamp"
          }
        }
      }
    }
  }
}
